{% extends "base.html" %}
{% block extratitle %}
| Mapeo | Lista
{% endblock %}
{% block extrahead %}
<script type="text/javascript" src="{{MEDIA_URL}}js/jquery-1.6.1.js"></script>
<script type="text/javascript">
    function cargar_elemento(modelo, page){
      $.getJSON('/mapeo/territorio/lista/' + modelo + '/?page=' + page, function(data){
          $('#resultado').html('');
          if (data.enlaces.length == 0){
             $('#resultado').html('No hay datos');
           }else{
            $.each(data.enlaces, function(i, elemento){
               var link = '<li><a href="/mapeo/ficha/' + elemento.modelo + 
               '/' + elemento.id + '/">' + elemento.nombre + '</a></li>';
               $('#resultado').append(link);
              }); 
             var paginador = '<a href="#"' + 
                             ' onClick=\'cargar_elemento("' + modelo + 
                             '", ' +  data.ant + ')\'"> Anterior</a> |' +
                             '<a href="#"' +
                             ' onClick=\'cargar_elemento("' + modelo + 
                             '", ' +  data.sig + ')\'"> Siguiente</a>'; 
             $('#resultado').append(paginador);
            }
        });
    }
    $(document).ready(function(){
       var lista_modelos = [{%for modelo in lista_modelos%}'{{modelo}}',{%endfor%}];
       $('.elemento_lista .change').click(function(){
          var id = $(this).parent().attr('id');
          cargar_elemento(id, 1);
       });
    });
</script>
{% endblock %}
{% block top %}
<div class="nombre_modulo">
    M&oacute;dulo de Mapeo
</div>
{% include "links.html" %}
{% endblock %}
{% block contenido %}
<div class="full">
    <div id="recuadro">
        <div id="filtrarlistado">
            <div class="elemento_lista"id ="familia" >
                <div class="change"><div id="familia-number" class="redondo">{{familia}}</div> Familias Productoras </div>
            </div>
            <div class="elemento_lista"id ="cooperativa" >
                <div class="change"><div id="cooperativa-number" class="redondo">{{cooperativa}}</div> Cooperativas </div>
            </div>
            <div class="elemento_lista"id ="centrales" >
                <div class="change"><div id="centrales-number" class="redondo">{{centrales}}</div> Centrales de Cooperativas </div>
            </div>
            <div class="elemento_lista"id ="asistencia" >
                <div class="change"><div id="asistencia-number" class="redondo">{{asistencia}}</div> Agentes de Asistencia T&eacute;cnica </div>
            </div>
            <div class="elemento_lista"id ="insumo" >
                <div class="change"><div id="insumo-number" class="redondo">{{insumo}}</div> Empresas de Insumos</div>
            </div>
            <div class="elemento_lista"id ="producto" >
                <div class="change"><div id="producto-number" class="redondo">{{producto}}</div> Empresas de Productos</div>
            </div>
            <div class="elemento_lista"id ="certificadora" >
                <div class="change"><div id="certificadora-number" class="redondo">{{certificadora}}</div>Empresas Certificadoras</div>
            </div>
            <div class="elemento_lista"id ="financieraa" >
                <div class="change"><div id="financiera-number" class="redondo">{{financiera}}</div>Empresas Financieras</div>
            </div>
            <div class="elemento_lista"id ="orgpublica" >
                <div class="change"><div id="orgpublica-number" class="redondo">{{orgpublica}}</div>Organizaci&oacute;n P&uacute;blica</div>
            </div>
        </div>

<div id="resultado" >

</div>
   <div class="clean"></div>
</div>

</div>
{% endblock %}
